# render.yaml - Configuración del servicio de la API Rockxy
services:
  # --- Definición del Servicio Web ---
  - type: web
    name: rockxy-backend # Nombre que Render usará para el servicio

    # 1. ESENCIAL: Define el entorno como Java (esto soluciona la detección de Node.js)
    env: java

    # Define tu región de preferencia (ej: oregon, frankfurt, etc.)
    region: oregon

    # Define el plan de servicio (cambia a 'standard' si necesitas más recursos)
    plan: starter

    # --- Comandos de Despliegue ---

    # Comando de compilación: Limpia, compila e instala, saltando las pruebas.
    buildCommand: "./mvnw clean install -DskipTests"

    # Comando de inicio: Ejecuta el archivo JAR que Maven generó.
    # *** IMPORTANTE: DEBES REEMPLAZAR 'nombre-del-jar-generado.jar' ***
    # Búscalo en tu compilación local, generalmente es target/tu-artefacto-version.jar
    startCommand: "java -jar target/rockxy-0.0.1-SNAPSHOT.jar"

    # --- Variables de Entorno ---
    envVars:
      # 2. ESENCIAL: Fuerza el uso de Java 17, resolviendo el error de JAVA_HOME
      - key: JAVA_VERSION
        value: 17

      # Configuración del puerto
      - key: PORT
        value: 8080

      # Variables Secretas que ya tenías
      - key: JWT_EXPIRATION
        value: # Tu valor de expiración
      - key: JWT_SECRET
        value: # Tu clave secreta


      # *** Añade aquí cualquier otra variable de configuración de base de datos o API ***
