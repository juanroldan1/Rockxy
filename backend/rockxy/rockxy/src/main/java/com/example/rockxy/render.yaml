# render.yaml - Configuración del servicio de la API Rockxy
services:
  # --- Definición del Servicio Web ---
  - type: web
    name: rockxy-backend # Nombre del servicio en Render

    # 1. ESENCIAL: Define el entorno como Java (esto corrige la detección de Node.js)
    env: java

    # Puedes elegir la región que prefieras (ej: oregon, frankfurt)
    region: oregon

    # Plan de servicio (starter para proyectos pequeños, standard para mayor rendimiento)
    plan: starter

    # --- Comandos de Despliegue ---

    # Comando de compilación: Limpia, compila e instala, saltando las pruebas.
    buildCommand: "./mvnw clean install -DskipTests"

    # Comando de inicio: Ejecuta el archivo JAR que Maven generó.
    # ¡DEBES VERIFICAR ESTE NOMBRE DE ARCHIVO!
    startCommand: "java -jar backend/rockxy/rockxy/target/rockxy-0.0.1-SNAPSHOT.jar"

    # --- Variables de Entorno ---
    envVars:
      # 2. ESENCIAL: Fuerza el uso de Java 17, resolviendo el error de JAVA_HOME
      - key: JAVA_VERSION
        value: 17

      # Configuración del puerto
      - key: PORT
        value: 8080

      # Variables Secretas (Mantén tus valores aquí)
      - key: JWT_EXPIRATION
        value: # Tu valor de expiración
      - key: JWT_SECRET
        value: # Tu clave secreta


      # *** Asegúrate de añadir aquí cualquier otra variable de DB o credenciales ***
